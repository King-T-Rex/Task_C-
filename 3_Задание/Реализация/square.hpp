// square.hpp
// Автор: Кузнецов Александр

// Класс Square — квадрат на плоскости
// У квадрата есть сторона (должна быть положительной) и координаты центра (x, y)

#pragma once
#include <iostream>   // для работы с потоками ввода/вывода
#include <stdexcept>  // для исключений (например, invalid_argument)
#include <cmath>      // для функции abs()
#include <string>     // для работы со строками

using namespace std;

// Класс Square представляет квадрат на плоскости
// У квадрата три свойства: длина стороны и координаты центра
class Square {
private:
    // Эти данные хранятся внутри объекта и недоступны напрямую извне
    double side;  // длина стороны квадрата (обязательно > 0)
    double x;     // координата X центра квадрата
    double y;     // координата Y центра квадрата

    // Вспомогательная функция: проверяет, что сторона положительная
    // Если передать отрицательное или нулевое значение — будет ошибка
    void validateSide(double s) const;

public:
    // Конструктор: создаёт квадрат с заданной стороной и центром
    // По умолчанию центр в точке (0, 0), если не указано иное
    Square(double side, double x = 0.0, double y = 0.0);

    // Геттеры — позволяют "прочитать" текущие значения полей
    // Они не меняют объект, поэтому помечены как const
    double getSide() const { return side; }
    double getX() const { return x; }
    double getY() const { return y; }

    // Сеттер для стороны — позволяет изменить длину стороны
    // Перед изменением проверяется, что новое значение корректно
    void setSide(double side_new);

    // Метод move — перемещает центр квадрата в новую точку
    // Координаты нельзя менять напрямую, только через этот метод
    void move(double new_x, double new_y);

    // Методы для вычисления геометрических свойств
    double area() const;      // возвращает площадь квадрата
    double perimeter() const; // возвращает периметр квадрата

    // Операторы сравнения: проверяют, равны ли два квадрата
    // Используется малая погрешность (EPS = 1e-9), потому что double неточный
    bool operator==(const Square& other) const;
    bool operator!=(const Square& other) const;

    // Преобразует квадрат в строку вида "сторона x y"
    string toString() const;
};

// Оператор вывода в поток (например, cout или файл)
// Позволяет писать: cout << мой_квадрат;
ostream& operator<<(ostream& os, const Square& sq);